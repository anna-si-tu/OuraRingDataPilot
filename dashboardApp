from dash import Dash, dcc, html
from dash.dependencies import Input, Output
import plotly.express as px
import pandas as pd

# install packages: pip install plotly dash pandas

df = pd.read_csv("data/oura_heartrate_pilot.csv", parse_dates = ["timestamp"])

app.layout = html.Div([
    html.H1("Time-Series Dashboard"),
    dcc.DatePickerRange(
        id='date-range',
        start_date=df['Date'].min(),
        end_date=df['Date'].max()
    ),
    dcc.Graph(id='time-series-graph')
])

@app.callback(
    Output('time-series-graph', 'figure'),
    Input('date-range', 'start_date'),
    Input('date-range', 'end_date')
)
def update_graph(start_date, end_date):
    filtered_df = df[(df['Date'] >= start_date) & (df['Date'] <= end_date)]
    fig = px.line(filtered_df, x='Date', y='Value')
    return fig
